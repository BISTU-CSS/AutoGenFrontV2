webpackJsonp([8],{IcnI:function(e,t,n){"use strict";var o=n("mvHQ"),r=n.n(o),a=n("7+uW"),s=n("NYxO");a.default.use(s.a),t.a=new s.a.Store({state:{token:sessionStorage.getItem("token"),user:JSON.parse(sessionStorage.getItem("user"))},mutations:{SET_TOKENN:function(e,t){e.token=t,sessionStorage.setItem("token",t)},SET_USER:function(e,t){e.user=t,sessionStorage.setItem("user",r()(t))},REMOVE_INFO:function(e){e.token="",e.user={},sessionStorage.setItem("token",""),sessionStorage.setItem("user",r()(""))}},getters:{},actions:{},modules:{}})},K31e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("//Fk"),r=n.n(o),a=n("mtWM"),s=n("IcnI"),i=a.a.create({baseURL:"http://82.157.31.212:8885/api"});i.interceptors.request.use(function(e){return s.a.getters.getToken&&(e.headers.token=window.sessionStorage.getItem("token")),e},function(e){return console.log(e),alert("do something with request error"),r.a.reject(e)}),a.a.interceptors.response.use(function(e){var t=e.data;return console.log(t),"ok"===t.retcode||"error"===t.retcode?e:"application/octet-stream"===e.headers.get("Content-Type")?e:r.a.reject(e.data.msg)},function(e){return e.response.data&&(e.message=e.response.data.msg),"ok"!==e.response.data.retcode&&router.push("/"),r.a.reject(e)});var u=i;var l={name:"Login",data:function(){return{loginForm:{loginName:"",password:""},responseResult:[]}},methods:{login:function(e){var t,n=this,o=this;(t={loginName:this.loginForm.loginName,password:this.loginForm.password},u({url:"/login",method:"post",data:t})).then(function(t){if("ok"===t.data.retcode){var r=t.data.data,a=r.token,s=r.user;o.$store.commit("SET_TOKENN",a),o.$store.commit("SET_USER",s),console.log(o.$store.state.token);var i=n.$route.query.redirect;1===e?n.$router.replace({path:"/"===i||void 0===i?"/choose":i}):2===e&&("管理员"===o.$store.state.user.authority?n.$router.push({path:"/usermanagement"}):alert("无管理员权限！"))}})}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("body",{attrs:{id:"login-page"}},[n("el-form",{staticClass:"login-container",attrs:{"label-position":"left","label-width":"0px"}},[n("h3",{staticClass:"login_title"},[e._v("系统登录")]),e._v(" "),n("el-form-item",[n("br"),e._v(" "),n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.loginName,callback:function(t){e.$set(e.loginForm,"loginName",t)},expression:"loginForm.loginName"}})],1),e._v(" "),n("br"),e._v(" "),n("el-form-item",[n("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("br"),e._v(" "),n("el-form-item",{staticStyle:{width:"100%"}},[n("el-row",[n("el-col",[n("el-button",{staticStyle:{width:"100%",border:"none"},attrs:{type:"primary"},on:{click:function(t){return e.login(1)}}},[e._v("登录\r\n          ")])],1),e._v(" "),n("el-col",[n("el-button",{staticStyle:{width:"100%",border:"none"},attrs:{type:"primary"},on:{click:function(t){return e.login(2)}}},[e._v("管理员登录\r\n          ")])],1)],1)],1),e._v(" "),n("br")],1)],1)},staticRenderFns:[]};var m=n("VU/8")(l,c,!1,function(e){n("tlOg")},"data-v-1d61e733",null);t.default=m.exports},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),r=n("zL8q"),a=n.n(r),s=(n("tvR6"),n("XLwt")),i=n("mtWM"),u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")({name:"App"},u,!1,function(e){n("OGFe")},null,null).exports,c=n("YaEn"),m=n("IcnI");o.default.config.productionTip=!1,o.default.use(a.a),o.default.prototype.$echarts=s,o.default.prototype.$axios=i.a,c.a.beforeEach(function(e,t,n){e.meta.requireAuth?m.a.state.token?n():n({path:"login",query:{redirect:e.fullPath}}):n()}),new o.default({el:"#app",router:c.a,store:m.a,components:{App:l},template:"<App/>"})},OGFe:function(e,t){},YaEn:function(e,t,n){"use strict";var o=n("7+uW"),r=n("/ocq");n("K31e");o.default.use(r.a),t.a=new r.a({routes:[{path:"/questionnaire",name:"questionnaire",meta:{requireAuth:!0},component:function(){return n.e(4).then(n.bind(null,"wd9o"))},beforeEnter:function(e,t,n){n()}},{path:"/choose",name:"choose",meta:{requireAuth:!0},component:function(){return n.e(3).then(n.bind(null,"RGWa"))}},{path:"/login",name:"login",component:function(){return new Promise(function(e){e()}).then(n.bind(null,"K31e"))}},{path:"/basicinfo",name:"basicinfo",meta:{requireAuth:!0},component:function(){return n.e(6).then(n.bind(null,"KPVa"))}},{path:"/usermanagement",name:"usermanagement",meta:{requireAuth:!0},component:function(){return n.e(5).then(n.bind(null,"S7yW"))}},{path:"/statistics",name:"statistics",meta:{requireAuth:!0},component:function(){return n.e(1).then(n.bind(null,"QD4/"))}},{path:"/upload",name:"upload",meta:{requireAuth:!0},component:function(){return n.e(0).then(n.bind(null,"J8Iu"))}},{path:"/pingfen",name:"pingfen",meta:{requireAuth:!0},component:function(){return n.e(2).then(n.bind(null,"CsNS"))}}]})},tlOg:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f57ec01f167d8b43e899.js.map