webpackJsonp([5],{"/71E":function(t,e){},S7yW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mtWM"),r=(a("XLwt"),{name:"usermanagement",data:function(){return{input:"",activeIndex:"1",dialogFormVisible:!1,form:{},tableData:[],total:0,pageNum:1,pageSize:5,teacher:[],count:[],rules:{name:[{required:!0,message:"此项为必填项",trigger:"blur"}]}}},methods:{load:function(){var t=this;"普通用户"===t.$store.state.user.authority&&(alert("无管理员权限！"),this.$router.push({path:"/choose"})),o.a.get("/api/user/page",{params:{pageNum:this.pageNum,pageSize:this.pageSize,user_name:this.input},headers:{token:window.sessionStorage.token}}).then(function(e){var a=e.data.data;t.tableData=a.data.records,t.total=a.total}).catch(function(t){alert("通信错误，请联系管理员")})},save:function(){var t=this;o.a.post("/api/user/addOrUpdate",this.form,{headers:{token:window.sessionStorage.token}}).then(function(e){"ok"==e.data.retcode?t.$message({message:"保存成功",type:"success"}):t.$message.error("保存失败")}).catch(function(t){alert(t)}),this.dialogFormVisible=!1,this.load()},addForm:function(){this.dialogFormVisible=!0,this.form={}},updateForm:function(t){this.dialogFormVisible=!0,this.form=t},deleteInfo:function(t){var e=this;o.a.delete("/api/"+t,{headers:{token:window.sessionStorage.token}}).then(function(t){"ok"==t.data.retcode?e.$message({message:"删除成功",type:"success"}):e.$message.error("删除失败")}).catch(function(t){alert("通信错误，请联系管理员")}),this.load()},handleCurrentChange:function(t){this.pageNum=t,this.load()},handleClose:function(){},handleSelect:function(t,e){1==t?this.$router.push({path:"/usermanagement"}):2==t&&this.$router.push({path:"/statistics"})}},mounted:function(){this.load()}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"Container"},[a("el-aside",{attrs:{width:"150px"}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("用户信息")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[t._v("统计信息")])],1)],1),t._v(" "),a("el-main",[a("div",{staticStyle:{"margin-left":"5%","margin-right":"5%","margin-top":"2%"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{"suffix-icon":"el-icon-search",placeholder:"请输入内容",size:"small"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"1%"},attrs:{type:"primary",size:"small"},on:{click:t.load}},[t._v("查询")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"1%"},attrs:{type:"primary",size:"small"},on:{click:t.addForm}},[t._v("新增")]),t._v(" "),a("br"),a("br"),a("br"),t._v(" "),a("el-table",{staticStyle:{width:"100%","flex-wrap":"wrap"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"loginName",label:"账号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"authority",label:"权限"}}),t._v(" "),a("el-table-column",{attrs:{prop:"teacher",label:"小组"}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",label:"当前完成方案数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.updateForm(e.row)}}},[a("i",{staticClass:"el-icon-edit"}),t._v(" 编辑")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"你确定删除吗？"},on:{confirm:function(a){return t.deleteInfo(e.row.id)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[a("i",{staticClass:"el-icon-delete"}),t._v(" 删除")])],1)],1)],1)]}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"2%","margin-right":"20%","margin-left":"35%"}},[a("el-pagination",{attrs:{background:"","current-page":t.pageNum,"page-size":t.pageSize,layout:"total,prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"用户信息",visible:t.dialogFormVisible,width:"50%",top:"5vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{staticStyle:{"margin-left":"10%","margin-right":"15%"},attrs:{"label-width":"60px",rules:t.rules}},[a("el-form-item",{attrs:{label:"账号",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.loginName,callback:function(e){t.$set(t.form,"loginName",e)},expression:"form.loginName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"小组"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.teacher,callback:function(e){t.$set(t.form,"teacher",e)},expression:"form.teacher"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"权限"}},[a("el-select",{attrs:{placeholder:"请选择权限"},model:{value:t.form.authority,callback:function(e){t.$set(t.form,"authority",e)},expression:"form.authority"}},[a("el-option",{attrs:{label:"管理员",value:"管理员"}}),t._v(" "),a("el-option",{attrs:{label:"普通用户",value:"普通用户"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(r,l,!1,function(t){a("/71E")},"data-v-0040ae2c",null);e.default=i.exports}});
//# sourceMappingURL=5.e75955f0e7d4f60443e4.js.map